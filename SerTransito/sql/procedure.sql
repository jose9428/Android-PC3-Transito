drop database bdtransito;

create database bdtransito;
use bdtransito;

CREATE TABLE VEHICULO (
  NROPLA  char (6) NOT NULL primary key ,
  NOMPRO  varchar(35)  ,
  COLOR   varchar(15)  ,
  MODELO  VARCHAR(20) 
      ) ;


CREATE TABLE INFRACCION(
  INFCOD CHAR (3) NOT NULL primary key ,
  INFDES varchar(35)  ,
  INFIMP numeric(8, 1)  
) ;


CREATE  table POLICIA(
  IDPOL char(4) NOT NULL Primary key ,
  NOMpol varchar (25)  ,
  NROPAT  CHAR(3) 
  ) ;


CREATE TABLE PAPELETA(
  NROPAP char (6) NOT NULL Primary Key ,
      NROPLA CHAR (6) ,
  INFCOD char (3)  ,
  IDPOL  CHAR (4)  ,
  PAPFECHA DATE 
) ;



INSERT INTO VEHICULO VALUES ('V00001','Acuña Osorio, Maria','ROJO','DATSUN' );
INSERT INTO VEHICULO VALUES ('V00002','Avino Azaña,Britney','AZUL','HUNDAI' );
INSERT INTO VEHICULO VALUES ('V00003','Carpio SANCHEZ,Susana','ROJO','TERCEL' );
INSERT INTO VEHICULO VALUES ('V00004','ADELA MEZA, Mario','PLOMO','DATSUN' );
INSERT INTO VEHICULO VALUES ('V00005','Bezada Obando, Mirlo','VERDE','TOYOTA' );
INSERT INTO VEHICULO VALUES ('V00006','Cabello Nieto,carlos','AZUL','DATSUN' );
INSERT INTO VEHICULO VALUES ('V00007','Caycho Pino,Elizabeth','ROJO','HUNDAI' );
INSERT INTO VEHICULO VALUES ('V00008','Enciso VadeIglesias, Lorena','ROJO','TOYOTA' );
INSERT INTO VEHICULO VALUES ('V00009','Fernandez Porras ,Brain','ROJO','MITSUBICHE' );
INSERT INTO VEHICULO VALUES ('V00010','Rimari Barrientos ,Luis','ROJO','TERCEL' );
INSERT INTO VEHICULO VALUES ('V00011','Rojas ramos,Jose Luis','ROJO','TOYOTA');
INSERT INTO VEHICULO VALUES ('V00012','PAREDES Gonzales, Eduardo','ROJO','DATSUN' );
INSERT INTO VEHICULO VALUES ('V00013','NURITH GUILLEN, Lucia','AZUL','DATSUN');
INSERT INTO VEHICULO VALUES ('V00014','VERGARA Lopez, Daniel','NEGRO','DATSUN');
INSERT INTO VEHICULO VALUES ('V00015','LOPEZ Costas, Marlo','NEGRO','HUNDAI' );
INSERT INTO VEHICULO VALUES ('V00016','huachua Lopez,Ernestina','AZUL','DATSUN' );
INSERT INTO VEHICULO VALUES ('V00017','Cardenas Caceres,Juana','ROJO','DATSUN');
INSERT INTO VEHICULO VALUES ('V00018','Leon Malpartida, ana','AZUL','TOYOTA' );
INSERT INTO VEHICULO VALUES ('V00019','Gonzales carrillo, Mauricio','NEGRO','TERECEL' );

INSERT INTO VEHICULO VALUES ('V00020','Alarcon Brenda ,Luis','ROJO','TERCEL' );
INSERT INTO VEHICULO VALUES ('V00021','Artega Huaman, Patricia','ROJO','TOYOTA');
INSERT INTO VEHICULO VALUES ('V00022','Bustamente Ramirez, Eduardo','ROJO','DATSUN' );
INSERT INTO VEHICULO VALUES ('V00023','Cespedes Urbano, Lucia','AZUL','DATSUN');
INSERT INTO VEHICULO VALUES ('V00024','Estrada Ponte, Lucy','NEGRO','DATSUN');
INSERT INTO VEHICULO VALUES ('V00025','Guzman Cruz, Eder','NEGRO','HUNDAI' );
INSERT INTO VEHICULO VALUES ('V00026','Ramos Perez,Erick','AZUL','DATSUN' );
INSERT INTO VEHICULO VALUES ('V00027','Rivera Custodio,Juan','ROJO','DATSUN');
INSERT INTO VEHICULO VALUES ('V00028','Robalino Ocmin, Jhony','AZUL','TOYOTA' );
INSERT INTO VEHICULO VALUES ('V00029','Santiago Trujillo, Homer','NEGRO','TERECEL' );
INSERT INTO VEHICULO VALUES ('V00030','Vilca Borchani, Isabel','NEGRO','TERECEL' );
INSERT INTO VEHICULO VALUES ('V00031','Cuipal Lopez, Marco','ROJO','DATSUN');






INSERT INTO POLICIA VALUES ('P001','Guzman Ochoa','007' );
INSERT INTO POLICIA VALUES ('P002','Maldonado Huaman','001' );
INSERT INTO POLICIA VALUES ('P003','Gaspar Acosta','004' );
INSERT INTO POLICIA VALUES ('P004','Echegaray Felix','007' );
INSERT INTO POLICIA VALUES ('P005','Cano Siu','004' );
INSERT INTO POLICIA VALUES ('P006','Melgarejo percy','001' );
INSERT INTO POLICIA VALUES ('P007','Grijalva Alan ','004' );
INSERT INTO POLICIA VALUES ('P008','Marin LOPEZ','007' );
INSERT INTO POLICIA VALUES ('P009','JOHANA LOPEZ','005' );


INSERT INTO INFRACCION VALUES ('I01','Luz Roja',90 );
INSERT INTO INFRACCION VALUES ('I02','Exceso de Velocidad',120 );
INSERT INTO INFRACCION VALUES ('I03','Sin Brevete',180 );
INSERT INTO INFRACCION VALUES ('I04','Mal Estacionado',80 );
INSERT INTO INFRACCION VALUES ('I05','Estado Etilico',200 );
INSERT INTO INFRACCION VALUES ('I06','Contra el Trafico',230 );
INSERT INTO INFRACCION VALUES ('I07','Sin semaforos',140 );
INSERT INTO INFRACCION VALUES ('I08','Contaminacion ambiental',125);




INSERT INTO PAPELETA VALUES ('100001','V00001','I08','P004','2016-03-13');
INSERT INTO PAPELETA VALUES ('100002','V00001','I07','P001','2016-03-13');
INSERT INTO PAPELETA VALUES ('100003','V00002','I06','P004','2016-03-13');
INSERT INTO PAPELETA VALUES ('100004','V00003','I04','P005','2016-03-13');
INSERT INTO PAPELETA VALUES ('100005','V00003','I04','P004','2016-03-13');
INSERT INTO PAPELETA VALUES ('100006','V00003','I05','P006','2016-03-13');
INSERT INTO PAPELETA VALUES ('100007','V00005','I04','P005','2016-03-13');
INSERT INTO PAPELETA VALUES ('100008','V00005','I04','P001','2016-03-13');
INSERT INTO PAPELETA VALUES ('100009','V00004','I08','P004','2016-03-13');
INSERT INTO PAPELETA VALUES ('100010','V00004','I04','P004','2016-03-13');
INSERT INTO PAPELETA VALUES ('100011','V00004','I04','P005','2016-03-13');
INSERT INTO PAPELETA VALUES ('100012','V00004','I07','P004','2016-03-13');
INSERT INTO PAPELETA VALUES ('100013','V00005','I08','P005','2016-03-13');
INSERT INTO PAPELETA VALUES ('100014','V00005','I04','P004','2016-03-13');
INSERT INTO PAPELETA VALUES ('100015','V00005','I01','P006','2016-03-13');
INSERT INTO PAPELETA VALUES ('100016','V00005','I07','P006','2016-03-13');
INSERT INTO PAPELETA VALUES ('100017','V00006','I05','P006','2016-03-13');
INSERT INTO PAPELETA VALUES ('100018','V00006','I05','P001','2016-03-13');
INSERT INTO PAPELETA VALUES ('100019','V00007','I05','P004','2016-03-13');
INSERT INTO PAPELETA VALUES ('100020','V00007','I05','P001','2016-03-13');

INSERT INTO PAPELETA VALUES ('100021','V00001','I05','P004','2016-03-13');
INSERT INTO PAPELETA VALUES ('100022','V00011','I07','P001','2016-03-13');
INSERT INTO PAPELETA VALUES ('100023','V00012','I08','P004','2016-03-13');
INSERT INTO PAPELETA VALUES ('100024','V00012','I05','P005','2016-03-13');
INSERT INTO PAPELETA VALUES ('100025','V00012','I04','P004','2016-03-13');
INSERT INTO PAPELETA VALUES ('100026','V00013','I05','P006','2016-03-13');
INSERT INTO PAPELETA VALUES ('100027','V00013','I05','P005','2016-03-13');
INSERT INTO PAPELETA VALUES ('100028','V00013','I04','P001','2016-03-13');
INSERT INTO PAPELETA VALUES ('100029','V00014','I07','P004','2016-03-13');
INSERT INTO PAPELETA VALUES ('100030','V00014','I04','P004','2016-03-13');
INSERT INTO PAPELETA VALUES ('100031','V00014','I04','P005','2016-03-13');
INSERT INTO PAPELETA VALUES ('100032','V00014','I07','P004','2016-03-13');
INSERT INTO PAPELETA VALUES ('100033','V00015','I04','P005','2016-03-13');
INSERT INTO PAPELETA VALUES ('100034','V00016','I04','P004','2016-03-13');
INSERT INTO PAPELETA VALUES ('100035','V00016','I01','P006','2016-03-13');
INSERT INTO PAPELETA VALUES ('100036','V00017','I05','P006','2016-03-13');
INSERT INTO PAPELETA VALUES ('100037','V00017','I05','P006','2016-03-13');
INSERT INTO PAPELETA VALUES ('100038','V00018','I04','P001','2016-03-13');
INSERT INTO PAPELETA VALUES ('100039','V00019','I04','P004','2016-03-13');
INSERT INTO PAPELETA VALUES ('100040','V00019','I01','P001','2016-03-13');

INSERT INTO PAPELETA VALUES ('100041','V00001','I05','P004','2016-03-13');
INSERT INTO PAPELETA VALUES ('100042','V00011','I07','P001','2016-03-13');
INSERT INTO PAPELETA VALUES ('100043','V00012','I08','P004','2016-03-13');
INSERT INTO PAPELETA VALUES ('100044','V00012','I05','P005','2018-03-13');
INSERT INTO PAPELETA VALUES ('100045','V00012','I04','P004','2018-03-13');
INSERT INTO PAPELETA VALUES ('100046','V00013','I05','P006','2018-04-13');
INSERT INTO PAPELETA VALUES ('100047','V00013','I05','P005','2018-05-13');
INSERT INTO PAPELETA VALUES ('100048','V00013','I04','P001','2018-05-13');
INSERT INTO PAPELETA VALUES ('100049','V00014','I07','P004','2018-06-13');
INSERT INTO PAPELETA VALUES ('100050','V00014','I04','P004','2018-06-13');
INSERT INTO PAPELETA VALUES ('100051','V00014','I04','P005','2018-07-13');
INSERT INTO PAPELETA VALUES ('100052','V00014','I07','P004','2018-07-13');
INSERT INTO PAPELETA VALUES ('100053','V00015','I04','P005','2018-01-13');
INSERT INTO PAPELETA VALUES ('100054','V00016','I04','P004','2018-01-13');
INSERT INTO PAPELETA VALUES ('100055','V00016','I01','P006','2018-02-13');
INSERT INTO PAPELETA VALUES ('100056','V00017','I05','P006','2018-02-13');
INSERT INTO PAPELETA VALUES ('100057','V00017','I05','P006','2018-01-13');
INSERT INTO PAPELETA VALUES ('100058','V00018','I04','P001','2018-01-13');
INSERT INTO PAPELETA VALUES ('100059','V00019','I04','P004','2018-01-13');
INSERT INTO PAPELETA VALUES ('100060','V00019','I01','P001','2018-01-13');

INSERT INTO PAPELETA VALUES ('100061','V00020','I05','P004','2018-04-13');
INSERT INTO PAPELETA VALUES ('100062','V00020','I07','P001','2018-04-13');
INSERT INTO PAPELETA VALUES ('100063','V00021','I08','P004','2018-03-13');
INSERT INTO PAPELETA VALUES ('100064','V00021','I05','P005','2018-03-13');
INSERT INTO PAPELETA VALUES ('100065','V00022','I04','P004','2019-04-13');
INSERT INTO PAPELETA VALUES ('100066','V00022','I05','P006','2019-05-13');
INSERT INTO PAPELETA VALUES ('100067','V00023','I05','P005','2019-06-13');
INSERT INTO PAPELETA VALUES ('100068','V00023','I04','P001','2019-07-13');
INSERT INTO PAPELETA VALUES ('100069','V00024','I07','P004','2019-08-13');
INSERT INTO PAPELETA VALUES ('100070','V00024','I04','P004','2019-09-13');
INSERT INTO PAPELETA VALUES ('100071','V00025','I04','P005','2019-10-13');
INSERT INTO PAPELETA VALUES ('100072','V00025','I07','P004','2019-11-13');
INSERT INTO PAPELETA VALUES ('100073','V00026','I04','P005','2019-12-13');
INSERT INTO PAPELETA VALUES ('100074','V00026','I05','P004','2019-03-13');
INSERT INTO PAPELETA VALUES ('100075','V00027','I01','P006','2019-01-13');
INSERT INTO PAPELETA VALUES ('100076','V00027','I05','P006','2019-02-13');
INSERT INTO PAPELETA VALUES ('100077','V00028','I05','P006','2019-03-13');
INSERT INTO PAPELETA VALUES ('100078','V00028','I03','P001','2019-04-13');
INSERT INTO PAPELETA VALUES ('100079','V00029','I03','P004','2019-03-13');
INSERT INTO PAPELETA VALUES ('100080','V00029','I01','P001','2019-05-13');
INSERT INTO PAPELETA VALUES ('100081','V00030','I03','P004','2019-11-13');
INSERT INTO PAPELETA VALUES ('100082','V00030','I01','P001','2019-04-13');



use bdtransito;
delimiter @@
create procedure spadicion(pla char(6),cod char(3),poli char(4))
begin
declare cuenta int;
declare pap char(6);
select max(nropap)+1 into cuenta from papeleta order by nropap;
set pap =cuenta;
insert into papeleta values(pap,pla,cod,poli,current_date);
end @@
delimiter;

use bdtransito;
select * from papeleta;